{"version":3,"sources":["img/logo.jpg..png","components/Header/Header.js","components/List/List.js","components/Home/Home.js","components/Topic/Topic.js","components/Use/Use.js","components/Main/Main.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","HeaderBar","state","token","useInfo","login","trim","axios","post","accesstoken","then","res","localStorage","setItem","data","id","console","log","setState","props","history","push","catch","message","info","loginOut","clear","getItem","author_id","Header","Layout","this","className","to","src","logo","alt","theme","mode","defaultSelectedKeys","Item","key","loginname","avatar_url","type","onClick","value","onChange","event","target","Component","withRouter","List","avatar","title","EyeOutlined","visit_count","LikeOutlined","reply_count","moment","last_reply","fromNow","Home","topic","getTypes","page","limit","get","changePage","location","search","replace","preprops","oldsearch","SubMenu","Menu","Content","Sider","number","allNumber","find","item","indexOf","style","padding","background","width","defaultOpenKeys","height","UserOutlined","LaptopOutlined","NotificationOutlined","minHeight","length","map","last_reply_at","author","defaultCurrent","total","pageSize","active","Topic","commit","textareaValue","upClick","reply_id","newTopic","currentReply","replies","action","ups","filter","warning","addCommit","topicid","match","params","content","myEditor","txt","handlerReply","forEach","showTextarea","E","document","querySelector","customConfig","onchange","html","create","TextArea","Input","create_at","dangerouslySetInnerHTML","__html","color","includes","placement","ExportOutlined","rows","Use","Main","exact","path","component","App","locale","Boolean","window","hostname","ReactDOM","render","getElementById","navigator","serviceWorker","ready","registration","unregister","error"],"mappings":"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","file":"static/js/main.1b245c29.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.jpg..67c8e1eb.png\";","import { Layout, Menu, Button } from 'antd';\r\nimport logo from '../../img/logo.jpg..png'\r\nimport React, { Component } from 'react';\r\nimport axios from 'axios'\r\nimport './header.scss'\r\nimport { message } from 'antd'\r\nimport { Link, withRouter } from 'react-router-dom'\r\nclass HeaderBar extends Component {\r\n  state = {\r\n    token: ' f29071e5-381e-4000-9d14-adfd134c92dc',\r\n    useInfo: null\r\n  }\r\n  componentDidMount() {\r\n    var token = localStorage.getItem('token')\r\n    var author_id = localStorage.getItem('author_id')\r\n    if (token) {\r\n      axios.post('https://www.vue-js.com/api/v1/accesstoken', { accesstoken: token }).then(res => {\r\n        localStorage.setItem('token', token)\r\n        localStorage.setItem('author_id', author_id)\r\n\r\n\r\n        this.setState({\r\n          useInfo: res.data\r\n        })\r\n      })\r\n    }\r\n  }\r\n  render() {\r\n    const { Header } = Layout;\r\n    const { token, useInfo } = this.state\r\n    return (\r\n      <Layout>\r\n        <Header className=\"header\">\r\n          <Link to='/'><img src={logo} alt=\"\" /></Link>\r\n          <Menu theme=\"dark\" mode=\"horizontal\" defaultSelectedKeys={['1']}>\r\n            <Menu.Item key=\"1\"><Link to='/'>首页</Link></Menu.Item>\r\n            <Menu.Item key=\"2\">热门话题</Menu.Item>\r\n            <Menu.Item key=\"3\">发布话题</Menu.Item>\r\n          </Menu>\r\n          {useInfo ? < div className='login'> <Link to={`/use/${useInfo.loginname}`}><img src={useInfo.avatar_url} alt=\"\" /></Link><span>{useInfo.loginname}</span><Button type=\"primary\" onClick={this.loginOut}>退出</Button></div> :\r\n            <div className='login'><input type=\"text\" value={token} onChange={(event) => {\r\n              this.setState({\r\n                token: event.target.value\r\n              })\r\n            }} />\r\n              <Button type=\"primary\" onClick={this.login}>登录</Button>\r\n            </div>\r\n          }\r\n        </Header>\r\n      </Layout>\r\n\r\n    );\r\n  }\r\n  login = () => {\r\n    const { token } = this.state\r\n    if (token.trim()) {\r\n      axios.post('https://www.vue-js.com/api/v1/accesstoken', { accesstoken: token }).then(res => {\r\n        localStorage.setItem('token', token)\r\n        localStorage.setItem('author_id', res.data.id)\r\n        console.log(res.data)\r\n        this.setState({\r\n          useInfo: res.data\r\n        })\r\n        this.props.history.push('/')\r\n      }).catch(() => {\r\n        message.info('登录失败，密码错误')\r\n      })\r\n    }\r\n  }\r\n  loginOut = () => {\r\n    localStorage.clear()\r\n    this.setState({\r\n      useInfo: ''\r\n    })\r\n    this.props.history.push('/')\r\n  }\r\n}\r\n\r\nexport default withRouter(HeaderBar);","import React from 'react';\r\nimport { Link } from 'react-router-dom'\r\nimport { EyeOutlined, LikeOutlined } from '@ant-design/icons'\r\nimport './list.scss'\r\nimport moment from 'moment'\r\nfunction List(props) {\r\n  return (\r\n    <li className='list'>\r\n      <div className=\"content-left\">\r\n        <Link to={`/use/${props.loginname}`}><img src={props.avatar} alt=\"\" /></Link>\r\n        <Link to={`/topic/${props.id}`}><span>{props.title}</span></Link>\r\n      </div>\r\n      <div className=\"content-right\">\r\n        <span className='title'><EyeOutlined></EyeOutlined> {props.visit_count}</span>\r\n        <span className='title'><LikeOutlined></LikeOutlined> {props.reply_count}</span>\r\n        <span className='title'> {moment(props.last_reply).fromNow()}</span>\r\n      </div>\r\n    </li>\r\n  )\r\n}\r\nexport default List;","import React, { Component } from 'react';\r\nimport List from '../List/List'\r\nimport './home.scss'\r\nimport { NavLink } from 'react-router-dom'\r\nimport { Layout, Menu, Skeleton, Pagination } from 'antd';\r\nimport { UserOutlined, LaptopOutlined, NotificationOutlined } from '@ant-design/icons';\r\nimport axios from 'axios';\r\nclass Home extends Component {\r\n  state = {\r\n    topic: []\r\n  }\r\n  componentDidMount() {\r\n    this.getTypes()\r\n\r\n  }\r\n  componentDidUpdate(preprops) {\r\n    const oldsearch = preprops.location.search\r\n    const { search } = this.props.location\r\n    if (search !== oldsearch) {\r\n      const type = search.replace('?tab=', '')\r\n      this.getTypes(type)\r\n    }\r\n\r\n  }\r\n  render() {\r\n    const { search } = this.props.location\r\n    const { SubMenu } = Menu;\r\n    const { Content, Sider } = Layout;\r\n    const { topic } = this.state\r\n    const paginaArr = [{ type: 'all', allNumber: 1018 },\r\n    { type: 'good', allNumber: 15 },\r\n    { type: 'weex', allNumber: 3 },\r\n    { type: 'share', allNumber: 372 },\r\n    { type: 'ask', allNumber: 624 },\r\n    { type: 'job', allNumber: 59 }]\r\n    const number = paginaArr.find(item => search === '' ? item.type === 'all' : search.indexOf(item.type) > -1).allNumber\r\n    return (\r\n\r\n      <div className=\"Home\">\r\n        <Content style={{ padding: '0 15%', background: '#ccc' }}>\r\n          <Layout className=\"site-layout-background\" >\r\n            <Sider className=\"site-layout-background\" width={200}>\r\n              <Menu\r\n                mode=\"inline\"\r\n                defaultSelectedKeys={['1']}\r\n                defaultOpenKeys={['sub1']}\r\n                style={{ height: '100%', padding: '24px 0' }}\r\n              > <Menu.Item key=\"1\"><NavLink to='/?tab=all'><span>\r\n                <UserOutlined />\r\n\r\n              </span>全部</NavLink></Menu.Item>\r\n                <SubMenu\r\n                  key=\"sub2\"\r\n                  title={\r\n                    <span>\r\n                      <LaptopOutlined />\r\n                  类别\r\n                </span>\r\n                  }\r\n                >\r\n                  <Menu.Item key=\"5\"><NavLink to='/?tab=good'>精华</NavLink></Menu.Item>\r\n                  <Menu.Item key=\"6\"><NavLink to='/?tab=weex'>weex</NavLink></Menu.Item>\r\n                  <Menu.Item key=\"7\"><NavLink to='/?tab=share'>分享</NavLink></Menu.Item>\r\n                  <Menu.Item key=\"8\"><NavLink to='/?tab=ask'>问答</NavLink></Menu.Item>\r\n                  <Menu.Item key=\"9\"><NavLink to='/?tab=job'>招聘</NavLink></Menu.Item>\r\n                </SubMenu>\r\n                <SubMenu\r\n                  key=\"sub3\"\r\n                  title={\r\n                    <span>\r\n                      <NotificationOutlined />\r\n                  论坛\r\n                </span>\r\n                  }\r\n                >\r\n                </SubMenu>\r\n              </Menu>\r\n            </Sider>\r\n            <Content style={{ padding: '24px', minHeight: 280, background: '#fff' }}>\r\n              {topic.length ? <div><ul style={{ padding: 0 }}>{\r\n                topic.map(item => <List last_reply={item.last_reply_at} loginname={item.author.loginname} id={item.id} avatar={item.author.avatar_url} title={item.title}\r\n                  visit_count={item.visit_count} reply_count={item.reply_count} key={item.id}></List>)\r\n              }</ul> <Pagination defaultCurrent={1} total={number} pageSize={20} onChange={this.changePage} /></div> : <Skeleton active />}\r\n\r\n            </Content>\r\n          </Layout>\r\n        </Content>\r\n      </div>\r\n    );\r\n  }\r\n  getTypes = (type = 'all', page = 1, limit = 20) => {\r\n    axios.get(`https://www.vue-js.com/api/v1/topics?tab=${type}&page=${page}&limit=${limit}`).then(res => {\r\n      console.log(res.data.data);\r\n      this.setState({\r\n        topic: res.data.data\r\n\r\n      })\r\n    }\r\n    )\r\n  }\r\n  changePage = (page) => {\r\n    const { search } = this.props.location\r\n    const type = search.replace('?tab=', '')\r\n    this.getTypes(type, page)\r\n  }\r\n}\r\n\r\nexport default Home;","import React, { Component } from 'react';\r\nimport { Skeleton, message, Tooltip, Button, Input } from 'antd';\r\nimport { Link } from 'react-router-dom'\r\nimport moment from 'moment'\r\nimport { LikeOutlined, ExportOutlined } from '@ant-design/icons'\r\nimport axios from 'axios'\r\nimport E from 'wangeditor'\r\nimport './topic.scss'\r\nclass Topic extends Component {\r\n  state = {\r\n    topic: null,\r\n    commit: '',\r\n    textareaValue: ''\r\n  }\r\n  componentDidMount() {\r\n    const { topicid } = this.props.match.params\r\n    axios.get(`https://www.vue-js.com/api/v1/topic/${topicid}`).then(res => {\r\n      console.log(res.data.data)\r\n      this.setState({\r\n        topic: res.data.data\r\n      })\r\n      this.myEditor = new E(document.querySelector('#editor'))\r\n      this.myEditor.customConfig.onchange = (html) => {\r\n        this.setState({\r\n          commit: html\r\n        })\r\n      }\r\n      this.myEditor.create()\r\n    })\r\n  }\r\n  render() {\r\n    const { TextArea } = Input;\r\n    const token = localStorage.getItem('token')\r\n    const author_id = localStorage.getItem('author_id')\r\n    const { topic, textareaValue } = this.state\r\n    return topic ? <div className='topic'>\r\n      <div className='topic-header'>\r\n        <h3>{topic.title}</h3>\r\n        <span className='active'><span>•</span>发布于 {moment(topic.create_at).fromNow()}</span>\r\n        <span className='active'><span>•</span>作者 {topic.author.loginname}</span>\r\n        <span className='active'><span>•</span>{topic.visit_count}次浏览</span>\r\n      </div>\r\n      <div className=\"topic-content\" dangerouslySetInnerHTML={{ __html: topic.content }}></div>\r\n      <div className=\"commit-box\">\r\n        <ul>\r\n          {topic.replies.map(item =>\r\n            <li key={item.id}>\r\n              <div className='commit-box-top'>\r\n                <div>\r\n                  <Link to={`/use/${item.author.loginname}`}><img src={item.author.avatar_url} alt=\"\" /></Link>\r\n                  <span>{item.author.loginname}</span>\r\n                  <span>{moment(item.create_at).fromNow()}</span>\r\n                  <div dangerouslySetInnerHTML={{ __html: item.content }} className='commit-content'></div>\r\n                </div>\r\n                <div>\r\n                  <span style={{ color: item.ups.includes(author_id) ? 'blue' : '#ccc' }}><LikeOutlined onClick={() => { this.upClick(item.id) }} /></span>\r\n                  <span>{item.ups.length}</span>\r\n                  {\r\n                    token ? <Tooltip placement=\"topLeft\" title=\"回复\">\r\n                      <span onClick={() => { this.handlerReply(item) }}><ExportOutlined /></span>\r\n                    </Tooltip> : \"\"\r\n                  }\r\n                </div>\r\n              </div>\r\n              {\r\n                item.showTextarea ? <div className=\"commit-box-footer\"><TextArea rows={4} value={textareaValue} onChange={event => {\r\n                  this.setState({\r\n                    textareaValue: event.target.value\r\n                  })\r\n                }} />\r\n                </div> : ''\r\n              }\r\n            </li>\r\n          )}\r\n        </ul>\r\n        <div className=\"commit-footer\">\r\n          <h3>添加回复</h3>\r\n          <div id=\"editor\"></div>\r\n          <Button type='primary' onClick={this.addCommit}>回复</Button>\r\n        </div>\r\n      </div>\r\n    </div > : <Skeleton active />\r\n  }\r\n  upClick = (reply_id) => {\r\n    // post /reply/:reply_id/ups 为评论点赞\r\n    const token = localStorage.getItem('token')\r\n    const newTopic = { ...this.state.topic }\r\n    const author_id = localStorage.getItem('author_id')\r\n    if (token) {\r\n      axios.post(`https://www.vue-js.com/api/v1/reply/${reply_id}/ups`, { accesstoken: token }).then(res => {\r\n        const currentReply = newTopic.replies.find(item => item.id === reply_id)\r\n        if (res.data.action === 'up') {\r\n          console.log(author_id)\r\n          currentReply.ups.push(author_id)\r\n\r\n        } else {\r\n          currentReply.ups = currentReply.ups.filter(item => item !== author_id)\r\n        }\r\n        this.setState({\r\n          topic: newTopic\r\n        })\r\n      })\r\n    } else {\r\n      message.warning('请先登录')\r\n    }\r\n  }\r\n  addCommit = () => {\r\n    const { commit } = this.state\r\n    const { topicid } = this.props.match.params\r\n    if (commit.trim()) {\r\n      const token = localStorage.getItem('token')\r\n      axios.post(`https://www.vue-js.com/api/v1/topic/${topicid}/replies`,\r\n        { accesstoken: token, content: commit }).then(() => {\r\n          axios.get(`https://www.vue-js.com/api/v1/topic/${topicid}`).then(res => {\r\n            this.setState({\r\n              topic: res.data.data\r\n            })\r\n          })\r\n          this.myEditor.txt.clear()\r\n        })\r\n    } else {\r\n      message.info('请输入有效内容')\r\n    }\r\n  }\r\n  handlerReply = ({ id, author }) => {\r\n    const { topic } = this.state\r\n    const newTopic = { ...topic }\r\n    newTopic.replies.forEach(item => {\r\n      if (item.id === id) {\r\n        item.showTextarea = !item.showTextarea\r\n      } else {\r\n        item.showTextarea = false\r\n      }\r\n    })\r\n    console.log(newTopic)\r\n    this.setState({\r\n      topic: newTopic,\r\n      textareaValue: `@${author.loginname}  `\r\n    })\r\n  }\r\n}\r\n\r\nexport default Topic;","import React, { Component } from 'react';\r\nimport './use.scss'\r\nclass Use extends Component {\r\n  state = {}\r\n  render() {\r\n    return (\r\n      <div className='use'>\r\n        用户\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Use;","import React from 'react';\r\nimport { Route } from 'react-router-dom'\r\nimport Home from '../Home/Home'\r\nimport Topic from '../Topic/Topic'\r\nimport Use from '../Use/Use'\r\nconst Main = (props) => {\r\n  return <>\r\n    <Route exact path='/' component={Home}></Route>\r\n    <Route path='/topic/:topicid' component={Topic}></Route>\r\n    <Route path='/use/:useid' component={Use}></Route>\r\n  </>\r\n}\r\nexport default Main","import React from 'react';\nimport moment from 'moment'\nimport 'moment/locale/zh-cn'\nimport HeaderBar from './components/Header/Header';\nimport Main from './components/Main/Main';\nimport { HashRouter as Router } from 'react-router-dom'\nfunction App() {\n  moment.locale('zh_cn')\n  return (\n    <div>\n      <Router>\n        <HeaderBar />\n        <Main />\n      </Router>\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}